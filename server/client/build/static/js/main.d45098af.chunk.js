(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{13:function(e,t,n){e.exports={"auth-in":"Signup_auth-in__3LMod",title:"Signup_title__2fWiN","auth-username":"Signup_auth-username__1LsTj","auth-password":"Signup_auth-password__EiD-z","auth-email":"Signup_auth-email__ilup0",signupSubmitBtn:"Signup_signupSubmitBtn__298lV",signupCancel:"Signup_signupCancel__1hCqS",failure:"Signup_failure__1R029",success:"Signup_success__3w71_"}},16:function(e,t,n){e.exports={header:"MainNavigation_header__2CZyt","header-content":"MainNavigation_header-content__2x3gc",logo:"MainNavigation_logo__1k_r1","user-actions":"MainNavigation_user-actions__2Wzvu",button:"MainNavigation_button__1fxWg",logout:"MainNavigation_logout__36AI2",login:"MainNavigation_login__1sUjL",signup:"MainNavigation_signup__3wMFS"}},17:function(e,t,n){e.exports={"auth-in":"Login_auth-in__38ZbL",title:"Login_title__1cNnT","auth-password":"Login_auth-password__vN1h-","auth-username":"Login_auth-username__1tFya",loginSubmitBtn:"Login_loginSubmitBtn__2xojr",loginCancel:"Login_loginCancel__257h4",failure:"Login_failure__3uwpO"}},60:function(e,t,n){},87:function(e,t,n){"use strict";n.r(t);var a=n(2),s=n.n(a),c=n(48),r=n.n(c),i=n(15),l=n.n(i),o=n(21),u=n(19),j=n(28),b=n(8),d=(n(60),n(24)),h=n(100),m=n(101),O=n(20),p=n.n(O),g=n(53),x=n(99),f=n(13),v=n.n(f),_=n(4),S=s.a.createContext(),N=function(e){var t=Object(a.useState)(localStorage.getItem("username")),n=Object(b.a)(t,2),s=n[0],c=n[1],r=Object(a.useState)(!1),i=Object(b.a)(r,2),l=i[0],o=i[1],u=Object(a.useState)(!1),j=Object(b.a)(u,2),d=j[0],h=j[1],m=Object(a.useState)(localStorage.getItem("userId")),O=Object(b.a)(m,2),p=O[0],g=O[1],x={currentUsername:s,showRegister:l,showLogin:d,currentUserId:p,setUsername:function(e){return c(e)},setShowLogin:function(e){return h(e)},setShowRegister:function(e){return o(e)},setCurrentUserId:function(e){return g(e)}};return Object(_.jsx)(S.Provider,{value:x,children:e.children})},w=S;function C(){var e=Object(a.useContext)(w),t=Object(a.useState)(!1),n=Object(b.a)(t,2),s=n[0],c=n[1],r=Object(a.useState)(!1),i=Object(b.a)(r,2),o=i[0],j=i[1],d=Object(a.useRef)(),h=Object(a.useRef)(),m=Object(a.useRef)(),O=function(){var e=Object(u.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n={username:d.current.value,email:h.current.value,password:m.current.value},e.prev=2,e.next=5,p.a.put("/users/signup",n);case 5:j(!1),c(!0),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),j(!0);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}();return Object(_.jsx)("section",{className:v.a.loginpage,children:Object(_.jsxs)("form",{className:v.a["auth-in"],onSubmit:O,onFocus:function(){j(null)},noValidate:!0,children:[Object(_.jsx)("h1",{className:v.a.title,children:Object(_.jsx)("b",{children:"Signup"})}),Object(_.jsxs)("div",{className:v.a["form-control"],children:[Object(_.jsx)("label",{htmlFor:"auth-username"}),Object(_.jsx)("input",{type:"username",placeholder:"Username",className:v.a["auth-username"],ref:d}),Object(_.jsx)("label",{htmlFor:"auth-email"}),Object(_.jsx)("input",{type:"email",placeholder:"Email",className:v.a["auth-email"],ref:h}),Object(_.jsx)("label",{htmlFor:"auth-password"}),Object(_.jsx)("input",{type:"password",placeholder:"Password",className:v.a["auth-password"],ref:m})]}),Object(_.jsx)("button",{type:"submit",className:v.a.signupSubmitBtn,children:Object(_.jsx)("b",{children:"signup"})}),Object(_.jsx)(x.a,{className:v.a.signupCancel,onClick:function(){return e.setShowRegister(!1)}}),s&&Object(_.jsx)("span",{className:v.a.success,children:"Successfull. You can login now!"}),o&&Object(_.jsx)("span",{className:v.a.failure,children:"Either user exists or incorrect details! Username should be at least 3 characters long and password 6 characters long."})]})})}var y=n(17),k=n.n(y);function L(){var e=Object(a.useContext)(w),t=Object(a.useState)(!1),n=Object(b.a)(t,2),s=n[0],c=n[1],r=Object(a.useRef)(),i=Object(a.useRef)(),o=function(){var t=Object(u.a)(l.a.mark((function t(n){var a,s;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),a={username:r.current.value,password:i.current.value},t.prev=2,t.next=5,p.a.post("/users/login",a);case 5:s=t.sent,localStorage.setItem("userId",s.data._id),localStorage.setItem("username",s.data.username),e.setUsername(s.data.username),e.setCurrentUserId(localStorage.getItem("userId")),e.setShowLogin(!1),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(2),c(!0);case 16:case"end":return t.stop()}}),t,null,[[2,13]])})));return function(e){return t.apply(this,arguments)}}();return Object(_.jsx)("section",{className:k.a.loginpage,children:Object(_.jsxs)("form",{className:k.a["auth-in"],onSubmit:o,onFocus:function(){c(null)},noValidate:!0,children:[Object(_.jsx)("h1",{className:k.a.title,children:Object(_.jsx)("b",{children:"Login"})}),Object(_.jsxs)("div",{className:k.a["form-control"],children:[Object(_.jsx)("label",{htmlFor:"auth-username"}),Object(_.jsx)("input",{type:"username",placeholder:"Username",className:k.a["auth-username"],ref:r}),Object(_.jsx)("label",{htmlFor:"auth-password"}),Object(_.jsx)("input",{type:"password",placeholder:"Password",className:k.a["auth-password"],ref:i})]}),Object(_.jsx)("button",{type:"submit",className:k.a.loginSubmitBtn,children:Object(_.jsx)("b",{children:"login"})}),Object(_.jsx)(x.a,{className:k.a.loginCancel,onClick:function(){return e.setShowLogin(!1)}}),s&&Object(_.jsx)("span",{className:k.a.failure,children:"User not found!"})]})})}var I=n(52),U=n.n(I),F=n(30);n.n(F).a.workerClass=n(86).default,U.a.config();var R=function(){var e=Object(a.useContext)(w),t=Object(a.useState)([]),n=Object(b.a)(t,2),c=n[0],r=n[1],i=Object(a.useState)(null),O=Object(b.a)(i,2),x=O[0],f=O[1],v=Object(a.useState)(null),S=Object(b.a)(v,2),N=S[0],y=S[1],k=Object(a.useState)(""),I=Object(b.a)(k,2),U=I[0],F=I[1],R=Object(a.useState)(""),z=Object(b.a)(R,2),B=z[0],M=z[1],D=Object(a.useState)(1),E=Object(b.a)(D,2),A=E[0],W=E[1],P=Object(a.useState)({latitude:47.040182,longitude:17.071727,zoom:4}),T=Object(b.a)(P,2),J=T[0],Y=T[1],V=Object(a.useState)(null),Z=Object(b.a)(V,2),X=Z[0],q=Z[1],H=function(){var t=Object(u.a)(l.a.mark((function t(n){var a,s;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),""!==U.trim()&&""!==B.trim()){t.next=4;break}return q("Please fill all details."),t.abrupt("return");case 4:return q(null),a={username:e.currentUsername,title:U,desc:B,rating:A,lat:N.lat,long:N.long},t.prev=6,t.next=9,p.a.post("/pins",a);case 9:s=t.sent,r([].concat(Object(o.a)(c),[s.data])),y(null),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(6),console.log(t.t0);case 17:F(""),M(""),W(1);case 20:case"end":return t.stop()}}),t,null,[[6,14]])})));return function(e){return t.apply(this,arguments)}}();return Object(a.useEffect)((function(){(function(){var e=Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.a.get("/pins");case 3:t=e.sent,r(t.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(_.jsxs)("div",{style:{height:"92.5vh",width:"100%"},children:[e.currentUserId&&Object(_.jsxs)("div",{className:"instruct",children:[Object(_.jsx)("span",{children:Object(_.jsx)(h.a,{})}),"Double click to add a new pin"]}),Object(_.jsxs)(d.c,Object(j.a)(Object(j.a)({},J),{},{mapboxApiAccessToken:"pk.eyJ1IjoibWFuYXZuYWhhcndhbCIsImEiOiJja3JyczB0ODYyY2UxMnBsN2NxNm0xZ3o5In0.yL4G3XuHhOWUD3XbH61WEw",width:"100%",height:"100%",transitionDuration:"200",mapStyle:"mapbox://styles/manavnaharwal/cksgkimbe6t2018rh5f7rx66q",onViewportChange:function(e){return Y(e)},onDblClick:e.currentUserId&&function(e){var t=Object(b.a)(e.lngLat,2),n=t[0],a=t[1];y({lat:a,long:n})},children:[c.map((function(t){return Object(_.jsxs)(s.a.Fragment,{children:[Object(_.jsx)(d.a,{latitude:t.lat,longitude:t.long,offsetLeft:-3.5*J.zoom,offsetTop:-7*J.zoom,children:Object(_.jsx)(h.a,{style:{fontSize:7*J.zoom,color:e.currentUsername===t.username?"tomato":"slateblue",cursor:"pointer"},onClick:function(){return e=t._id,n=t.lat,a=t.long,f(e),void Y(Object(j.a)(Object(j.a)({},J),{},{latitude:n,longitude:a}));var e,n,a}})}),t._id===x&&Object(_.jsx)(d.b,{latitude:t.lat,longitude:t.long,closeButton:!0,closeOnClick:!1,onClose:function(){return f(null)},anchor:"bottom",children:Object(_.jsxs)("div",{className:"card",children:[Object(_.jsx)("label",{children:"Place"}),Object(_.jsx)("h4",{className:"place",children:t.title}),Object(_.jsx)("label",{children:"Review"}),Object(_.jsx)("p",{className:"desc",children:t.desc}),Object(_.jsx)("label",{children:"Rating"}),Object(_.jsx)("div",{className:"stars",children:Array(t.rating).fill(Object(_.jsx)(m.a,{className:"star"})).map((function(e,t){return Object(_.jsx)(m.a,{className:"star"},t)}))}),Object(_.jsxs)("span",{className:"username",children:["Created by ",Object(_.jsx)("b",{children:t.username})]}),Object(_.jsx)("span",{className:"date",children:Object(g.a)(t.createdAt)})]})})]},t._id)})),N&&Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(d.a,{latitude:N.lat,longitude:N.long,offsetLeft:-3.5*J.zoom,offsetTop:-7*J.zoom,children:Object(_.jsx)(h.a,{style:{fontSize:7*J.zoom,color:"tomato",cursor:"pointer"}})}),Object(_.jsx)(d.b,{latitude:N.lat,longitude:N.long,closeButton:!0,closeOnClick:!1,onClose:function(){return y(null)},anchor:"bottom",children:Object(_.jsxs)("div",{className:"input-form",children:[Object(_.jsx)("div",{style:{color:"red",textAlign:"center"},children:X}),Object(_.jsxs)("form",{onSubmit:H,onFocus:function(){q(null)},children:[Object(_.jsx)("label",{children:"Title"}),Object(_.jsx)("input",{placeholder:"Enter a title",autoFocus:!0,onChange:function(e){return F(e.target.value)}}),Object(_.jsx)("label",{children:"Description"}),Object(_.jsx)("textarea",{placeholder:"Say us something about this place.",onChange:function(e){return M(e.target.value)},rows:"5"}),Object(_.jsx)("label",{children:"Rating"}),Object(_.jsxs)("select",{onChange:function(e){return W(e.target.value)},children:[Object(_.jsx)("option",{value:"1",children:"1"}),Object(_.jsx)("option",{value:"2",children:"2"}),Object(_.jsx)("option",{value:"3",children:"3"}),Object(_.jsx)("option",{value:"4",children:"4"}),Object(_.jsx)("option",{value:"5",children:"5"})]}),Object(_.jsx)("button",{type:"submit",className:"submitButton",children:"Add Pin"})]})]})})]}),e.showRegister&&Object(_.jsx)(C,{}),e.showLogin&&Object(_.jsx)(L,{})]}))]})},z=n(16),B=n.n(z);var M=function(){var e=Object(a.useContext)(w);return Object(_.jsx)("header",{className:B.a.header,children:Object(_.jsxs)("div",{className:B.a["header-content"],children:[Object(_.jsxs)("div",{className:B.a.logo,children:[Object(_.jsx)(h.a,{style:{fontSize:"1.8rem"}}),"Map pin"]}),Object(_.jsx)("div",{className:B.a["user-actions"],children:e.currentUsername?Object(_.jsx)("button",{className:"".concat(B.a.button," ").concat(B.a.logout),onClick:function(){return e.setUsername(null),e.setCurrentUserId(null),localStorage.removeItem("userId"),void localStorage.removeItem("username")},children:"Log out"}):Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)("button",{className:"".concat(B.a.button," ").concat(B.a.login),onClick:function(){return e.setShowLogin(!0)},children:"Log in"}),Object(_.jsx)("button",{className:"".concat(B.a.button," ").concat(B.a.signup),onClick:function(){return e.setShowRegister(!0)},children:"Register"})]})})]})})};var D=function(e){return Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(M,{}),e.children]})};r.a.render(Object(_.jsx)(N,{children:Object(_.jsx)(D,{children:Object(_.jsx)(R,{})})}),document.getElementById("root"))}},[[87,1,2]]]);
//# sourceMappingURL=main.d45098af.chunk.js.map