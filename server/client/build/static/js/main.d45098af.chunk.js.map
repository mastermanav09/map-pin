{"version":3,"sources":["components/Auth/Signup.module.css","components/Layout/MainNavigation.module.css","components/Auth/Login.module.css","components/store/auth-context.js","components/Auth/Signup.jsx","components/Auth/Login.jsx","App.js","components/Layout/MainNavigation.js","components/Layout/Layout.js","index.js"],"names":["module","exports","AuthContext","React","createContext","AuthContextProvider","props","useState","localStorage","getItem","currentUsername","setCurrentUsername","showRegister","setRegister","showLogin","setLogin","currentUserID","setCurrentUserID","authContext","currentUserId","setUsername","value","setShowLogin","setShowRegister","setCurrentUserId","Provider","children","Register","useContext","success","setSuccess","error","setError","usernameRef","useRef","emailRef","passwordRef","handleSubmit","e","a","preventDefault","newUser","username","current","email","password","axios","put","className","classes","loginpage","onSubmit","onFocus","noValidate","htmlFor","type","placeholder","ref","signupSubmitBtn","Cancel","signupCancel","onClick","failure","Login","user","post","res","setItem","data","_id","loginSubmitBtn","loginCancel","mapboxgl","workerClass","require","default","dotenv","config","App","pins","setPins","currentPlaceId","setCurrentPlaceId","newPlace","setNewPlace","title","setTitle","desc","setDesc","star","setStar","latitude","longitude","zoom","viewport","setViewport","errorMsg","setErrorMsg","trim","newPin","rating","lat","long","console","log","useEffect","get","getPins","style","height","width","Room","mapboxApiAccessToken","process","transitionDuration","mapStyle","onViewportChange","onDblClick","lngLat","map","p","Fragment","offsetLeft","offsetTop","fontSize","color","cursor","id","closeButton","closeOnClick","onClose","anchor","Array","fill","Star","index","format","createdAt","textAlign","autoFocus","onChange","target","rows","MainNavigation","header","logo","button","logout","removeItem","login","signup","Layout","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.d45098af.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"auth-in\":\"Signup_auth-in__3LMod\",\"title\":\"Signup_title__2fWiN\",\"auth-username\":\"Signup_auth-username__1LsTj\",\"auth-password\":\"Signup_auth-password__EiD-z\",\"auth-email\":\"Signup_auth-email__ilup0\",\"signupSubmitBtn\":\"Signup_signupSubmitBtn__298lV\",\"signupCancel\":\"Signup_signupCancel__1hCqS\",\"failure\":\"Signup_failure__1R029\",\"success\":\"Signup_success__3w71_\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"MainNavigation_header__2CZyt\",\"header-content\":\"MainNavigation_header-content__2x3gc\",\"logo\":\"MainNavigation_logo__1k_r1\",\"user-actions\":\"MainNavigation_user-actions__2Wzvu\",\"button\":\"MainNavigation_button__1fxWg\",\"logout\":\"MainNavigation_logout__36AI2\",\"login\":\"MainNavigation_login__1sUjL\",\"signup\":\"MainNavigation_signup__3wMFS\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"auth-in\":\"Login_auth-in__38ZbL\",\"title\":\"Login_title__1cNnT\",\"auth-password\":\"Login_auth-password__vN1h-\",\"auth-username\":\"Login_auth-username__1tFya\",\"loginSubmitBtn\":\"Login_loginSubmitBtn__2xojr\",\"loginCancel\":\"Login_loginCancel__257h4\",\"failure\":\"Login_failure__3uwpO\"};","import React, { useState } from \"react\";\r\n\r\nconst AuthContext = React.createContext();\r\n\r\nexport const AuthContextProvider = (props) => {\r\n  const [currentUsername, setCurrentUsername] = useState(\r\n    localStorage.getItem(\"username\")\r\n  );\r\n  const [showRegister, setRegister] = useState(false);\r\n  const [showLogin, setLogin] = useState(false);\r\n  const [currentUserID, setCurrentUserID] = useState(\r\n    localStorage.getItem(\"userId\")\r\n  );\r\n\r\n  const authContext = {\r\n    currentUsername: currentUsername,\r\n    showRegister: showRegister,\r\n    showLogin: showLogin,\r\n    currentUserId: currentUserID,\r\n\r\n    setUsername: (value) => setCurrentUsername(value),\r\n    setShowLogin: (value) => setLogin(value),\r\n    setShowRegister: (value) => setRegister(value),\r\n    setCurrentUserId: (value) => setCurrentUserID(value),\r\n  };\r\n\r\n  return (\r\n    <AuthContext.Provider value={authContext}>\r\n      {props.children}\r\n    </AuthContext.Provider>\r\n  );\r\n};\r\n\r\nexport default AuthContext;\r\n","import { Cancel } from \"@material-ui/icons\";\nimport axios from \"axios\";\nimport { useRef, useState, useContext } from \"react\";\nimport \"./Signup.module.css\";\nimport AuthContext from \"../store/auth-context\";\nimport classes from \"./Signup.module.css\";\n\nexport default function Register() {\n  const authContext = useContext(AuthContext);\n  const [success, setSuccess] = useState(false);\n  const [error, setError] = useState(false);\n  const usernameRef = useRef();\n  const emailRef = useRef();\n  const passwordRef = useRef();\n\n  const focusHandler = () => {\n    setError(null);\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    const newUser = {\n      username: usernameRef.current.value,\n      email: emailRef.current.value,\n      password: passwordRef.current.value,\n    };\n\n    try {\n      await axios.put(\"/users/signup\", newUser);\n      setError(false);\n      setSuccess(true);\n    } catch (err) {\n      setError(true);\n    }\n  };\n\n  return (\n    <section className={classes.loginpage}>\n      <form\n        className={classes[\"auth-in\"]}\n        onSubmit={handleSubmit}\n        onFocus={focusHandler}\n        noValidate\n      >\n        <h1 className={classes[\"title\"]}>\n          <b>Signup</b>\n        </h1>\n\n        <div className={classes[\"form-control\"]}>\n          <label htmlFor=\"auth-username\"></label>\n          <input\n            type=\"username\"\n            placeholder=\"Username\"\n            className={classes[\"auth-username\"]}\n            ref={usernameRef}\n          />\n\n          <label htmlFor=\"auth-email\"></label>\n          <input\n            type=\"email\"\n            placeholder=\"Email\"\n            className={classes[\"auth-email\"]}\n            ref={emailRef}\n          />\n\n          <label htmlFor=\"auth-password\"></label>\n          <input\n            type=\"password\"\n            placeholder=\"Password\"\n            className={classes[\"auth-password\"]}\n            ref={passwordRef}\n          />\n        </div>\n\n        <button type=\"submit\" className={classes.signupSubmitBtn}>\n          <b>signup</b>\n        </button>\n        <Cancel\n          className={classes.signupCancel}\n          onClick={() => authContext.setShowRegister(false)}\n        />\n        {success && (\n          <span className={classes.success}>\n            Successfull. You can login now!\n          </span>\n        )}\n        {error && (\n          <span className={classes.failure}>\n            Either user exists or incorrect details! Username should be at least\n            3 characters long and password 6 characters long.\n          </span>\n        )}\n      </form>\n    </section>\n  );\n}\n","import React, { useContext } from \"react\";\nimport { Cancel } from \"@material-ui/icons\";\nimport axios from \"axios\";\nimport { useRef, useState } from \"react\";\nimport AuthContext from \"../store/auth-context\";\nimport classes from \"./Login.module.css\";\n\nexport default function Login() {\n  const authContext = useContext(AuthContext);\n  const [error, setError] = useState(false);\n  const usernameRef = useRef();\n  const passwordRef = useRef();\n\n  const focusHandler = () => {\n    setError(null);\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    const user = {\n      username: usernameRef.current.value,\n      password: passwordRef.current.value,\n    };\n    try {\n      const res = await axios.post(\"/users/login\", user);\n\n      localStorage.setItem(\"userId\", res.data._id);\n      localStorage.setItem(\"username\", res.data.username);\n      authContext.setUsername(res.data.username);\n      authContext.setCurrentUserId(localStorage.getItem(\"userId\"));\n\n      authContext.setShowLogin(false);\n    } catch (err) {\n      setError(true);\n    }\n  };\n\n  return (\n    <section className={classes.loginpage}>\n      <form\n        className={classes[\"auth-in\"]}\n        onSubmit={handleSubmit}\n        onFocus={focusHandler}\n        noValidate\n      >\n        <h1 className={classes[\"title\"]}>\n          <b>Login</b>\n        </h1>\n\n        <div className={classes[\"form-control\"]}>\n          <label htmlFor=\"auth-username\"></label>\n          <input\n            type=\"username\"\n            placeholder=\"Username\"\n            className={classes[\"auth-username\"]}\n            ref={usernameRef}\n          />\n          <label htmlFor=\"auth-password\"></label>\n          <input\n            type=\"password\"\n            placeholder=\"Password\"\n            className={classes[\"auth-password\"]}\n            ref={passwordRef}\n          />\n        </div>\n\n        <button type=\"submit\" className={classes.loginSubmitBtn}>\n          <b>login</b>\n        </button>\n        <Cancel\n          className={classes.loginCancel}\n          onClick={() => authContext.setShowLogin(false)}\n        />\n        {error && <span className={classes.failure}>User not found!</span>}\n      </form>\n    </section>\n  );\n}\n","import \"./app.css\";\nimport ReactMapGL, { Marker, Popup } from \"react-map-gl\";\nimport React, { useContext, useEffect, useState } from \"react\";\nimport { Room, Star } from \"@material-ui/icons\";\nimport axios from \"axios\";\nimport { format } from \"timeago.js\";\nimport Register from \"./components/Auth/Signup\";\nimport Login from \"./components/Auth/Login\";\nimport AuthContext from \"./components/store/auth-context\";\nimport dotenv from \"dotenv\";\nimport mapboxgl from \"mapbox-gl\";\n\n// eslint-disable-next-line import/no-webpack-loader-syntax\nmapboxgl.workerClass =require(\"worker-loader!mapbox-gl/dist/mapbox-gl-csp-worker\").default;\n\ndotenv.config();\n\nfunction App() {\n  const authContext = useContext(AuthContext);\n  const [pins, setPins] = useState([]);\n  const [currentPlaceId, setCurrentPlaceId] = useState(null);\n  const [newPlace, setNewPlace] = useState(null);\n  const [title, setTitle] = useState(\"\");\n  const [desc, setDesc] = useState(\"\");\n  const [star, setStar] = useState(1);\n  const [viewport, setViewport] = useState({\n    latitude: 47.040182,\n    longitude: 17.071727,\n    zoom: 4,\n  });\n  const [errorMsg, setErrorMsg] = useState(null);\n\n  const handleMarkerClick = (id, lat, long) => {\n    setCurrentPlaceId(id);\n    setViewport({ ...viewport, latitude: lat, longitude: long });\n  };\n\n  const onFocusErrorRemove = () => {\n    setErrorMsg(null);\n  };\n\n  const handleAddClick = (e) => {\n    const [longitude, latitude] = e.lngLat;\n    setNewPlace({\n      lat: latitude,\n      long: longitude,\n    });\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n\n    if (title.trim() === \"\" || desc.trim() === \"\") {\n      setErrorMsg(\"Please fill all details.\");\n      return;\n    }\n\n    setErrorMsg(null);\n    const newPin = {\n      username: authContext.currentUsername,\n      title,\n      desc,\n      rating: star,\n      lat: newPlace.lat,\n      long: newPlace.long,\n    };\n\n    try {\n      const res = await axios.post(\"/pins\", newPin);\n      setPins([...pins, res.data]);\n      setNewPlace(null);\n    } catch (err) {\n      console.log(err);\n    }\n\n    setTitle(\"\");\n    setDesc(\"\");\n    setStar(1);\n  };\n\n  useEffect(() => {\n    const getPins = async () => {\n      try {\n        const res = await axios.get(\"/pins\");\n        setPins(res.data);\n      } catch (err) {\n        console.log(err);\n      }\n    };\n    getPins();\n  }, []);\n\n  return (\n    <div style={{ height: \"92.5vh\", width: \"100%\" }}>\n      {authContext.currentUserId && (\n        <div className=\"instruct\">\n          <span>\n            <Room />\n          </span>\n          Double click to add a new pin\n        </div>\n      )}\n      <ReactMapGL\n        {...viewport}\n        mapboxApiAccessToken={process.env.REACT_APP_MAPBOX_ACCESS_TOKEN}\n        width=\"100%\"\n        height=\"100%\"\n        transitionDuration=\"200\"\n        mapStyle=\"mapbox://styles/manavnaharwal/cksgkimbe6t2018rh5f7rx66q\"\n        onViewportChange={(viewport) => setViewport(viewport)}\n        onDblClick={authContext.currentUserId && handleAddClick}\n      >\n        {pins.map((p) => (\n          <React.Fragment key={p._id}>\n            <Marker\n              latitude={p.lat}\n              longitude={p.long}\n              offsetLeft={-3.5 * viewport.zoom}\n              offsetTop={-7 * viewport.zoom}\n            >\n              <Room\n                style={{\n                  fontSize: 7 * viewport.zoom,\n                  color:\n                    authContext.currentUsername === p.username\n                      ? \"tomato\"\n                      : \"slateblue\",\n                  cursor: \"pointer\",\n                }}\n                onClick={() => handleMarkerClick(p._id, p.lat, p.long)}\n              />\n            </Marker>\n            {p._id === currentPlaceId && (\n              <Popup\n                latitude={p.lat}\n                longitude={p.long}\n                closeButton={true}\n                closeOnClick={false}\n                onClose={() => setCurrentPlaceId(null)}\n                anchor=\"bottom\"\n              >\n                <div className=\"card\">\n                  <label>Place</label>\n                  <h4 className=\"place\">{p.title}</h4>\n                  <label>Review</label>\n                  <p className=\"desc\">{p.desc}</p>\n                  <label>Rating</label>\n                  <div className=\"stars\">\n                    {Array(p.rating)\n                      .fill(<Star className=\"star\" />)\n                      .map((star, index) => (\n                        <Star className=\"star\" key={index} />\n                      ))}\n                  </div>\n                  <span className=\"username\">\n                    Created by <b>{p.username}</b>\n                  </span>\n                  <span className=\"date\">{format(p.createdAt)}</span>\n                </div>\n              </Popup>\n            )}\n          </React.Fragment>\n        ))}\n        {newPlace && (\n          <>\n            <Marker\n              latitude={newPlace.lat}\n              longitude={newPlace.long}\n              offsetLeft={-3.5 * viewport.zoom}\n              offsetTop={-7 * viewport.zoom}\n            >\n              <Room\n                style={{\n                  fontSize: 7 * viewport.zoom,\n                  color: \"tomato\",\n                  cursor: \"pointer\",\n                }}\n              />\n            </Marker>\n            <Popup\n              latitude={newPlace.lat}\n              longitude={newPlace.long}\n              closeButton={true}\n              closeOnClick={false}\n              onClose={() => setNewPlace(null)}\n              anchor=\"bottom\"\n            >\n              <div className=\"input-form\">\n                <div style={{ color: \"red\", textAlign: \"center\" }}>\n                  {errorMsg}\n                </div>\n                <form onSubmit={handleSubmit} onFocus={onFocusErrorRemove}>\n                  <label>Title</label>\n                  <input\n                    placeholder=\"Enter a title\"\n                    autoFocus\n                    onChange={(e) => setTitle(e.target.value)}\n                  />\n                  <label>Description</label>\n                  <textarea\n                    placeholder=\"Say us something about this place.\"\n                    onChange={(e) => setDesc(e.target.value)}\n                    rows=\"5\"\n                  />\n                  <label>Rating</label>\n                  <select onChange={(e) => setStar(e.target.value)}>\n                    <option value=\"1\">1</option>\n                    <option value=\"2\">2</option>\n                    <option value=\"3\">3</option>\n                    <option value=\"4\">4</option>\n                    <option value=\"5\">5</option>\n                  </select>\n                  <button type=\"submit\" className=\"submitButton\">\n                    Add Pin\n                  </button>\n                </form>\n              </div>\n            </Popup>\n          </>\n        )}\n\n        {authContext.showRegister && <Register />}\n        {authContext.showLogin && <Login />}\n      </ReactMapGL>\n    </div>\n  );\n}\nexport default App;\n","import React, { useContext } from \"react\";\r\nimport classes from \"./MainNavigation.module.css\";\r\nimport AuthContext from \"../store/auth-context\";\r\nimport { Room } from \"@material-ui/icons\";\r\n\r\nfunction MainNavigation() {\r\n  const authContext = useContext(AuthContext);\r\n\r\n  const handleLogout = () => {\r\n    authContext.setUsername(null);\r\n    authContext.setCurrentUserId(null);\r\n    localStorage.removeItem(\"userId\");\r\n    localStorage.removeItem(\"username\");\r\n  };\r\n\r\n  return (\r\n    <header className={classes.header}>\r\n      <div className={classes[\"header-content\"]}>\r\n        <div className={classes.logo}>\r\n          <Room style={{ fontSize: \"1.8rem\" }} />\r\n          Map pin\r\n        </div>\r\n        <div className={classes[\"user-actions\"]}>\r\n          {authContext.currentUsername ? (\r\n            <button\r\n              className={`${classes.button} ${classes.logout}`}\r\n              onClick={() => handleLogout()}\r\n            >\r\n              Log out\r\n            </button>\r\n          ) : (\r\n            <>\r\n              <button\r\n                className={`${classes.button} ${classes.login}`}\r\n                onClick={() => authContext.setShowLogin(true)}\r\n              >\r\n                Log in\r\n              </button>\r\n              <button\r\n                className={`${classes.button} ${classes.signup}`}\r\n                onClick={() => authContext.setShowRegister(true)}\r\n              >\r\n                Register\r\n              </button>\r\n            </>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </header>\r\n  );\r\n}\r\n\r\nexport default MainNavigation;\r\n","import React from \"react\";\r\nimport MainNavigation from \"./MainNavigation\";\r\n\r\nfunction Layout(props) {\r\n  return (\r\n    <>\r\n      <MainNavigation />\r\n      {props.children}\r\n    </>\r\n  );\r\n}\r\n\r\nexport default Layout;\r\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\nimport Layout from \"./components/Layout/Layout\";\nimport { AuthContextProvider } from \"./components/store/auth-context\";\n\nReactDOM.render(\n  <AuthContextProvider>\n    <Layout>\n      <App />\n    </Layout>\n  </AuthContextProvider>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}